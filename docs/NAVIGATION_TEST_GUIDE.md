# 导航功能测试指南

## 功能概述
我们已经实现了带有缓存和请求限制的导航功能，有效解决了高德地图API的QPS限制问题。

## 测试步骤

### 1. 访问测试页面
在浏览器中打开：http://localhost:3000/test-navigation

### 2. 测试地址建议功能
1. 在"出发地"输入框中输入地址，例如：
   - "嘉兴"
   - "杭州西湖"
   - "上海外滩"
   
2. 观察是否出现地址建议下拉列表
3. 选择一个建议地址，确认输入框内容是否正确更新

4. 在"目的地"输入框中重复上述测试

### 3. 测试路径查询
1. 填写出发地和目的地
2. 选择出发日期和时间（默认为当前时间）
3. 点击"查询路径"按钮
4. 观察是否成功显示路径结果

### 4. 验证QPS限制处理
1. 快速连续输入多个不同的地址
2. 观察浏览器控制台，确认没有出现"CUQPS_HAS_EXCEEDED_THE_LIMIT"错误
3. 注意控制台中的"从缓存返回数据"日志，确认缓存功能正常工作

## 技术实现亮点

### 1. 带缓存的API请求限制Hook
- 创建了`useApiRateLimitWithCache` Hook，实现请求频率限制和结果缓存
- 默认最小请求间隔为1.5秒，缓存有效期为5分钟
- 相同查询会从缓存中获取，减少API调用

### 2. 智能错误处理
- 当遇到QPS限制错误时，自动增加请求间隔到3秒
- 10秒后恢复正常间隔
- 错误信息不会显示给用户，避免影响用户体验

### 3. 防抖优化
- 防抖延迟从500毫秒增加到1000毫秒
- 减少快速输入时的API调用频率

## 预期结果
- 地址输入时显示相关建议
- 无QPS限制错误
- 响应速度快（得益于缓存）
- 用户体验流畅

## 问题排查
如果遇到问题，请检查：
1. 浏览器控制台是否有错误信息
2. 网络请求是否正常
3. 高德地图API密钥是否正确配置